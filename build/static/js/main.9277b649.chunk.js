(this["webpackJsonpinsulin-calculator"]=this["webpackJsonpinsulin-calculator"]||[]).push([[0],{19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),c=a(13),i=a(6),u=a(9),s=a(4),d=a(5);a(7);function m(e){var t=e.id,a=e.type,n=void 0===a?"text":a,l=e.name,o=void 0===l?"":l,c=e.value,i=void 0===c?"":c,u=e.onChange,s=void 0===u?"":u,d=e.description,m=void 0===d?"":d,g=e.placeholder,h=void 0===g?"":g,b=e.unit,f=void 0===b?"":b;return r.a.createElement("div",null,r.a.createElement("label",null,m),r.a.createElement("br",null),r.a.createElement("input",{type:n,autoComplete:"off",id:t,name:o,placeholder:h,value:i,onChange:""===s?function(){return 0}:function(e){return s(e)}}),r.a.createElement("label",null,f))}function g(e){var t=e.setBloodSugar,a=e.setTargetBloodSugar,n=e.setCorrectionFactor,l=e.setCarbohydrateFactor,o=e.bloodSugar,c=e.targetBloodSugar,i=e.correctionFactor,u=e.carbohydrateFactor;return r.a.createElement("div",{className:"space-around"},r.a.createElement(m,{name:"BloodSugar",value:o.toString(),description:"Blutzucker",unit:"mg/dl",onChange:function(e){return t(e.target.value)}}),r.a.createElement(m,{name:"TargetBloodSugar",value:c,description:"Blutzucker Zielwert",unit:"mg/dl",onChange:function(e){return a(e.target.value)}}),r.a.createElement(m,{name:"CorrectionFactor",value:i,description:"Korrektur-Faktor",unit:"mg/dl",onChange:function(e){return n(e.target.value)}}),r.a.createElement(m,{name:"CarbohydrateFactor",value:u,description:"KE-Faktor",onChange:function(e){return l(e.target.value)}}))}var h=a(23),b=a(22);a(18);function f(e){var t=e.suggestionText,a=e.handleSuggestionClick;return r.a.createElement("li",{onClick:function(){return a(t)}},t)}function v(e){var t=e.allSuggestions,a=e.searchingText,n=e.handleSuggestionClick,l=""===a?[]:t.filter((function(e){return e.slice(0,a.length).toLowerCase()===a.toLowerCase()}));return r.a.createElement("div",null,0!==l.length&&r.a.createElement("ul",{className:"suggestion-list"},l.map((function(e){return r.a.createElement(f,{key:Math.random(),suggestionText:e,handleSuggestionClick:n})}))))}function E(e){var t=e.id,a=(e.activeSlideIdx,e.slide1),n=e.slide2,l=e.foodNameSuggestions,o=e.handleIsIntermealChange,c=e.handleSlide1ValueChange,i=e.handleSlide2ValueChange,u=e.deleteFoodItem,s=e.handleSuggestionClick,d=(e.handleSlideChange,r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"intermeal-checkbox"},r.a.createElement("input",{type:"checkbox",checked:a.isIntermeal,onChange:function(){return o(t,1)}})," ZM?"),r.a.createElement(m,{id:t,name:"name",description:"Name",value:a.name,onChange:function(e){return c(e)}}),a.shouldDisplaySuggestions&&r.a.createElement(v,{allSuggestions:l,searchingText:a.name,handleSuggestionClick:function(e){return s(e,t)}}),r.a.createElement(m,{id:t,name:"grams",type:"number",description:"Gramm",value:a.grams,onChange:function(e){return c(e)}}),r.a.createElement(m,{id:t,name:"carbohydratesPer100Grams",type:"number",description:"Kohlenhydrate pro 100g",value:a.carbohydratesPer100Grams,onChange:function(e){return c(e)}})));r.a.Fragment,n.isIntermeal,n.name,n.numberOfPieces,n.carbohydratesPerPiece;return r.a.createElement("div",null,r.a.createElement("div",{className:"space-around"},r.a.createElement("button",{className:"delete-food-item-button",onClick:function(){return u(t)}}),d),r.a.createElement("hr",null))}function O(e){var t=e.foodItems,a=void 0===t?[]:t,n=e.foodNameSuggestions,l=void 0===n?[]:n,o=e.addNewFoodItem,c=e.handleIsIntermealChange,i=e.handleSlide1ValueChange,u=e.handleSlide2ValueChange,s=e.deleteFoodItem,d=e.handleSuggestionClick,m=e.handleSlideChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Elemente"),a.map((function(e){return r.a.createElement(E,{key:e.key,id:e.id,activeSlideIdx:e.activeSlideIdx,slide1:e.slide1,slide2:e.slide2,foodNameSuggestions:l,handleIsIntermealChange:c,handleSlide1ValueChange:i,handleSlide2ValueChange:u,deleteFoodItem:s,handleSuggestionClick:d,handleSlideChange:m})})),r.a.createElement("p",null,r.a.createElement("button",{className:"add-new-food-item-button",onClick:function(){return o()}})))}function S(e){var t=e.totalIE,a=e.totalMainMealKE,n=e.totalIntermealKE,l=e.totalKE,o=e.totalCorrectionInsulin,c=e.outputRef;return r.a.createElement("div",null,""===t||void 0==t||t<=0?"":r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("div",{ref:c,className:"space-around"},r.a.createElement("p",{className:"output"},"Hauptmahlzeit-KE : ",a," KE ",r.a.createElement("br",null),"Zwischenmahlzeit-KE : ",n," KE ",r.a.createElement("br",null),"Gesamt-KE: ",l," KE ",r.a.createElement("br",null),r.a.createElement("br",null),"Korrektur-Insulin: ",o," IE  ",r.a.createElement("br",null),r.a.createElement("span",{style:{fontWeight:"bold"}}," Gesamt-Insulin: ",t," IE ")))))}h.a.use([b.a]);function j(e,t){var a="insulin-calculator-"+e,r=Object(n.useState)((function(){var e=localStorage.getItem(a);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),l=Object(d.a)(r,2),o=l[0],c=l[1];return Object(n.useEffect)((function(){null!=o&&localStorage.setItem(a,JSON.stringify(o))}),[a,o]),[o,c]}var p="insulin-calculator-";function I(){var e=j("lastSavedData"),t=Object(d.a)(e,2),a=(t[0],t[1],j("foodNameSuggestions",[])),l=Object(d.a)(a,2),o=l[0],m=l[1],h=Object(n.useState)(""),b=Object(d.a)(h,2),f=b[0],v=b[1],E=j("".concat(oe(),"-targetBloodSugar")),I=Object(d.a)(E,2),C=I[0],y=I[1],k=j("".concat(oe(),"-correctionFactor")),N=Object(d.a)(k,2),F=N[0],P=N[1],w=j("".concat(oe(),"-carbohydrateFactor")),K=Object(d.a)(w,2),B=K[0],x=K[1],M=j("foodItems",[]),D=Object(d.a)(M,2),G=D[0],L=D[1],T=Object(n.useState)(""),V=Object(d.a)(T,2),J=V[0],z=V[1],R=Object(n.useState)(""),A=Object(d.a)(R,2),Z=A[0],W=A[1],H=Object(n.useState)(""),U=Object(d.a)(H,2),q=U[0],Q=U[1],X=Object(n.useState)(""),Y=Object(d.a)(X,2),$=Y[0],_=Y[1],ee=Object(n.useState)(""),te=Object(d.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useRef)();function le(e){return"string"!==typeof e?"":"".concat(e[0].toUpperCase()).concat(e.slice(1))}function oe(){var e=(new Date).toLocaleTimeString().split(":"),t=Object(d.a)(e,2),a=t[0],n=t[1],r=ie(a)+ie(n)/60;return r<=11.5?"morning":r<=16?"midday":"evening"}function ce(e){var t=e.target,a=t.name,n=t.value,r=t.id;if("-"!==n[n.length-1]){var l=G.map((function(e){var t;if(r!=e.id)return e;if("name"===a){var l="".concat(p,"foodItem-").concat(n.toLowerCase(),"-carbohydratesPer100Grams"),c=localStorage.getItem(l);if(null!=c){var d,g=JSON.parse(c),h=Object(s.a)(Object(s.a)({},e.slide1),{},(d={},Object(i.a)(d,a,n),Object(i.a)(d,"shouldDisplaySuggestions",!1),Object(i.a)(d,"carbohydratesPer100Grams",g),d));return Object(s.a)(Object(s.a)({},e),{},{slide1:h})}}var b=""!==e.slide1.name&&null!=e.slide1.name&&"."!==e.slide1.name[0];if("carbohydratesPer100Grams"===a&&b){var f="".concat(p,"foodItem-").concat(e.slide1.name.toLowerCase(),"-carbohydratesPer100Grams"),v=le(e.slide1.name.toLowerCase());""!==n?(localStorage.setItem(f,JSON.stringify(n)),function(e){var t=e;Array.isArray(e)||(t=[e]),0!==(t=t.filter((function(e){return!o.some((function(t){return e===t}))}))).length&&(t=[].concat(Object(u.a)(o),Object(u.a)(t)),m(t))}(v)):(localStorage.removeItem(f),function(e){for(var t,a=0;a<o.length;a++)if(e===o[a]){t=a;break}if(null!=t){var n=Object(u.a)(o);n.splice(t,1),m(n)}}(v))}var E="name"===a,O=Object(s.a)(Object(s.a)({},e.slide1),{},(t={},Object(i.a)(t,a,n),Object(i.a)(t,"shouldDisplaySuggestions",E),t));return Object(s.a)(Object(s.a)({},e),{},{slide1:O})}));L(l)}}function ie(e){if("string"!==typeof e)return-1;var t=e.slice();t=t.replace(",",".");var a=parseFloat(t);return Number.isNaN(a)?-1:a}function ue(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a="ein oder mehrere Werte sind nicht g\xfcltig";function n(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.every((function(e){return-1!==ie(e)}))}function r(e){var r=e.slide1.grams,l=e.slide1.carbohydratesPer100Grams;return n(r,l)?ie(r)*(ie(l)/100)/10:(t&&alert(a),0)}function l(e,r,l){return n(e,r,l)?(ie(e)-ie(r))/ie(l):(""!==e&&t&&alert(a),0)}var o=l(f,C,F);Q(Math.round(10*o)/10);var i,u=0,s=0,d=Object(c.a)(G);try{for(d.s();!(i=d.n()).done;){var m=i.value,g=r(m);u+=g,s+=m.slide1.isIntermeal?g:0}}catch(b){d.e(b)}finally{d.f()}if(W(Math.round(10*u)/10),_(Math.round(10*s)/10),ne(Math.round(10*(u-s))/10),!n(B))return t&&alert(a),-1;var h=u*ie(B);h+=o,h=Math.round(10*h)/10,z(h),e&&setTimeout((function(){re.current.scrollIntoView({smooth:!0})}),5)}return Object(n.useEffect)((function(){localStorage.removeItem("insulin-calculator-lastSavedData"),ue(!1,!1)}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Insulin Rechner"),r.a.createElement("p",null,r.a.createElement("button",{className:"clear-data-button space-around",onClick:function(){L([]),z(0)}},"Daten l\xf6schen")),r.a.createElement("hr",{className:"destop-hr new-section-hr"}),r.a.createElement(g,{setBloodSugar:v,setTargetBloodSugar:y,setCorrectionFactor:P,setCarbohydrateFactor:x,bloodSugar:f,targetBloodSugar:C,correctionFactor:F,carbohydrateFactor:B}),r.a.createElement("hr",{className:"destop-hr new-section-hr"}),r.a.createElement(O,{foodItems:G,foodNameSuggestions:o,addNewFoodItem:function(){var e=Math.random(),t=[].concat(Object(u.a)(G),[{key:Math.random(),id:e,activeSlideIdx:1,slide1:{name:"",grams:"",carbohydratesPer100Grams:"",isIntermeal:!1,shouldDisplaySuggestions:!0},slide2:{name:"",numberOfPieces:"",carbohydratesPerPiece:"",isIntermeal:!1,shouldDisplaySuggestions:!0}}]);L(t)},handleIsIntermealChange:function(e,t){var a=G.map((function(a){if(e==a.id){if(1===t){var n=Object(s.a)(Object(s.a)({},a.slide1),{},{isIntermeal:!a.slide1.isIntermeal});return Object(s.a)(Object(s.a)({},a),{},{slide1:n})}var r=Object(s.a)(Object(s.a)({},a.slide2),{},{isIntermeal:!a.slide2.isIntermeal});return Object(s.a)(Object(s.a)({},a),{},{slide2:r})}return a}));L(a)},handleSlide1ValueChange:ce,handleSlide2ValueChange:function(e){var t=e.target,a=t.name,n=t.value,r=t.id;if("-"!==n[n.length-1]){var l=G.map((function(e){var t;if(r!=e.id)return e;if("name"===a){var l="".concat(p,"foodItem-").concat(n.toLowerCase(),"-carbohydratesPerPiece"),o=localStorage.getItem(l);if(null!=o){var c,u=JSON.parse(o),d=Object(s.a)(Object(s.a)({},e.slide2),{},(c={},Object(i.a)(c,a,n),Object(i.a)(c,"shouldDisplaySuggestions",!1),Object(i.a)(c,"carbohydratesPerPiece",u),c));return Object(s.a)(Object(s.a)({},e),{},{slide2:d})}}var m=""!==e.slide2.name&&null!=e.slide2.name&&"."!==e.slide2.name[0];if("carbohydratesPerPiece"===a&&m){var g="".concat(p,"foodItem-").concat(e.slide2.name.toLowerCase(),"-carbohydratesPerPiece");le(e.slide2.name.toLowerCase());""!==n?localStorage.setItem(g,JSON.stringify(n)):localStorage.removeItem(g)}var h="name"===a,b=Object(s.a)(Object(s.a)({},e.slide2),{},(t={},Object(i.a)(t,a,n),Object(i.a)(t,"shouldDisplaySuggestions",h),t));return Object(s.a)(Object(s.a)({},e),{},{slide2:b})}));L(l)}},deleteFoodItem:function(e){for(var t,a=0;a<G.length;a++)if(e==G[a].id){t=a;break}var n=Object(u.a)(G);n.splice(t,1),L(n)},handleSuggestionClick:function(e,t){ce({target:{name:"name",value:e,id:t}})},handleSlideChange:function(e,t){var a=G.map((function(a){if(e==a.id){var n=Object(s.a)({},a.slide1),r=Object(s.a)({},a.slide2);return Object(s.a)(Object(s.a)({},a),{},{slide1:n,slide2:r,activeSlideIdx:t+1})}return a}));L(a)}}),r.a.createElement("p",{style:{marginBottom:"20px"}},r.a.createElement("button",{className:"calculateIE-button",onClick:ue},"Berechne IE")),r.a.createElement(S,{totalIE:J,totalMainMealKE:ae,totalIntermealKE:$,totalKE:Z,totalCorrectionInsulin:q,outputRef:re}))}o.a.render(r.a.createElement(I,null),document.getElementById("root"))},7:function(e,t,a){}},[[19,1,2]]]);
//# sourceMappingURL=main.9277b649.chunk.js.map