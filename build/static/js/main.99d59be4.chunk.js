(this["webpackJsonpinsulin-calculator"]=this["webpackJsonpinsulin-calculator"]||[]).push([[0],{19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),l=a(13),i=a(6),u=a(7),s=a(4),d=a(5);a(8);function m(e){var t=e.id,a=e.type,n=void 0===a?"text":a,o=e.name,c=void 0===o?"":o,l=e.value,i=void 0===l?"":l,u=e.onChange,s=void 0===u?"":u,d=e.description,m=void 0===d?"":d,g=e.placeholder,f=void 0===g?"":g,h=e.unit,b=void 0===h?"":h;return r.a.createElement("div",null,r.a.createElement("label",null,m),r.a.createElement("br",null),r.a.createElement("input",{type:n,autoComplete:"off",id:t,name:c,placeholder:f,value:i,onChange:""===s?function(){return 0}:function(e){return s(e)}}),r.a.createElement("label",null,b))}function g(e){var t=e.setBloodSugar,a=e.setTargetBloodSugar,n=e.setCorrectionFactor,o=e.setCarbohydrateFactor,c=e.bloodSugar,l=e.targetBloodSugar,i=e.correctionFactor,u=e.carbohydrateFactor;return r.a.createElement("div",{className:"space-around"},r.a.createElement(m,{name:"BloodSugar",type:"number",value:c.toString(),description:"Blutzucker",unit:"mg/dl",onChange:function(e){return t(e.target.value)}}),r.a.createElement(m,{name:"TargetBloodSugar",type:"number",value:l,description:"Blutzucker Zielwert",unit:"mg/dl",onChange:function(e){return a(e.target.value)}}),r.a.createElement(m,{name:"CorrectionFactor",type:"number",value:i,description:"Korrektur-Faktor",unit:"mg/dl",onChange:function(e){return n(e.target.value)}}),r.a.createElement(m,{name:"CarbohydrateFactor",type:"number",value:u,description:"KE-Faktor",onChange:function(e){return o(e.target.value)}}))}var f=a(23),h=a(22);a(18);function b(e){var t=e.suggestionText,a=e.handleSuggestionClick;return r.a.createElement("li",{onClick:function(){return a(t)}},t)}function S(e){var t=e.allSuggestions,a=e.searchingText,n=e.handleSuggestionClick,o=""===a?[]:t.filter((function(e){return e.slice(0,a.length).toLowerCase()===a.toLowerCase()}));return r.a.createElement("div",null,0!==o.length&&r.a.createElement("ul",{className:"suggestion-list"},o.map((function(e){return r.a.createElement(b,{key:Math.random(),suggestionText:e,handleSuggestionClick:n})}))))}function p(e){var t=e.id,a=e.isPer100gSlideActive,n=void 0===a||a,o=e.per100gSlide,c=void 0===o?{}:o,l=e.perPieceSlide,i=void 0===l?{}:l,u=e.foodNameSuggestionsForPer100gSlide,s=e.foodNameSuggestionsForPerPieceSlide,d=e.handleIsIntermealChange,g=e.handlePer100gSlideValueChange,f=e.handlePerPieceSlideValueChange,h=e.deleteFoodItem,b=e.handleSuggestionClick,p=e.handleSlideChange,v=r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"intermeal-checkbox"},r.a.createElement("input",{type:"checkbox",checked:c.isIntermeal,onChange:function(){return d(t,1)}})," ZM?"),r.a.createElement(m,{id:t,name:"name",description:"Name",value:c.name,onChange:function(e){return g(e)}}),c.shouldDisplaySuggestions&&r.a.createElement(S,{allSuggestions:u,searchingText:c.name,handleSuggestionClick:function(e){return b(e,t)}}),r.a.createElement(m,{id:t,name:"grams",type:"number",description:"Gramm",value:c.grams,onChange:function(e){return g(e)}}),r.a.createElement(m,{id:t,name:"carbohydratesPer100Grams",type:"number",description:"Kohlenhydrate pro 100g",value:c.carbohydratesPer100Grams,onChange:function(e){return g(e)}})),E=r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"intermeal-checkbox"},r.a.createElement("input",{type:"checkbox",checked:i.isIntermeal,onChange:function(){return d(t,2)}})," ZM?"),r.a.createElement(m,{id:t,name:"name",description:"Name",value:i.name,onChange:function(e){return f(e)}}),i.shouldDisplaySuggestions&&r.a.createElement(S,{allSuggestions:s,searchingText:i.name,handleSuggestionClick:function(e){return b(e,t,n)}}),r.a.createElement(m,{id:t,name:"numberOfPieces",type:"number",description:"Anzahl",value:i.numberOfPieces,onChange:function(e){return f(e)}}),r.a.createElement(m,{id:t,name:"carbohydratesPerPiece",type:"number",description:"Kohlenhydrate pro St\xfcck",value:i.carbohydratesPerPiece,onChange:function(e){return f(e)}}));return r.a.createElement("div",null,r.a.createElement("p",{className:"center-elements"},r.a.createElement("button",{className:"per-100g-button ".concat(n&&"active-button"),onClick:function(){return p(t,!0)}},"pro 100g"),r.a.createElement("button",{className:"per-piece-button ".concat(!n&&"active-button"),onClick:function(){return p(t,!1)}},"pro St\xfcck")),r.a.createElement("div",{className:"space-around"},r.a.createElement("button",{className:"delete-food-item-button",onClick:function(){return h(t)}}),n?v:E),r.a.createElement("hr",null))}function v(e){var t=e.foodItems,a=void 0===t?[]:t,n=e.foodNameSuggestionsForPer100gSlide,o=void 0===n?[]:n,c=e.foodNameSuggestionsForPerPieceSlide,l=void 0===c?[]:c,i=e.addNewFoodItem,u=e.handleIsIntermealChange,s=e.handlePer100gSlideValueChange,d=e.handlePerPieceSlideValueChange,m=e.deleteFoodItem,g=e.handleSuggestionClick,f=e.handleSlideChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Elemente"),a.map((function(e){return r.a.createElement(p,{key:e.key,id:e.id,isPer100gSlideActive:e.isPer100gSlideActive,per100gSlide:e.per100gSlide,perPieceSlide:e.perPieceSlide,foodNameSuggestionsForPer100gSlide:o,foodNameSuggestionsForPerPieceSlide:l,handleIsIntermealChange:u,handlePer100gSlideValueChange:s,handlePerPieceSlideValueChange:d,deleteFoodItem:m,handleSuggestionClick:g,handleSlideChange:f})})),r.a.createElement("p",null,r.a.createElement("button",{className:"add-new-food-item-button",onClick:function(){return i()}})))}function E(e){var t=e.totalIE,a=e.totalMainMealKE,n=e.totalIntermealKE,o=e.totalKE,c=e.totalCorrectionInsulin,l=e.outputRef;return r.a.createElement("div",{ref:l},""===t||void 0==t||t<=0?"":r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("div",{className:"space-around"},r.a.createElement("p",{className:"output"},"Hauptmahlzeit-KE : ",a," KE ",r.a.createElement("br",null),"Zwischenmahlzeit-KE : ",n," KE ",r.a.createElement("br",null),"Gesamt-KE: ",o," KE ",r.a.createElement("br",null),r.a.createElement("br",null),"Korrektur-Insulin: ",c," IE  ",r.a.createElement("br",null),r.a.createElement("span",{style:{fontWeight:"bold"}}," Gesamt-Insulin: ",t," IE ")))))}f.a.use([h.a]);function O(e,t){var a="insulin-calculator-"+e,r=Object(n.useState)((function(){var e=localStorage.getItem(a);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),o=Object(d.a)(r,2),c=o[0],l=o[1];return Object(n.useEffect)((function(){null!=c&&localStorage.setItem(a,JSON.stringify(c))}),[a,c]),[c,l]}var P="insulin-calculator-",j=!1;function y(){var e=O("lastSavedData",{foodItems:[]}),t=Object(d.a)(e,2),a=t[0],o=t[1],c=O("foodNameSuggestions",[]),m=Object(d.a)(c,2),f=(m[0],m[1],O("foodNameSuggestions-per100gSlide",[])),h=Object(d.a)(f,2),b=h[0],S=h[1],p=O("foodNameSuggestions-perPieceSlide",[]),y=Object(d.a)(p,2),C=y[0],I=y[1],N=Object(n.useState)(""),k=Object(d.a)(N,2),F=k[0],w=k[1],K=O("".concat(be(),"-targetBloodSugar")),B=Object(d.a)(K,2),M=B[0],A=B[1],D=O("".concat(be(),"-correctionFactor")),x=Object(d.a)(D,2),G=x[0],T=x[1],J=O("".concat(be(),"-carbohydrateFactor")),L=Object(d.a)(J,2),V=L[0],z=L[1],R=O("foodItems",[]),Z=Object(d.a)(R,2),W=Z[0],H=Z[1],U=Object(n.useState)(""),q=Object(d.a)(U,2),Q=q[0],X=q[1],Y=Object(n.useState)(""),$=Object(d.a)(Y,2),_=$[0],ee=$[1],te=Object(n.useState)(""),ae=Object(d.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(""),ce=Object(d.a)(oe,2),le=ce[0],ie=ce[1],ue=Object(n.useState)(""),se=Object(d.a)(ue,2),de=se[0],me=se[1],ge=Object(n.useRef)();function fe(e){return"string"!==typeof e?"":"".concat(e[0].toUpperCase()).concat(e.slice(1))}function he(e){var t=e;Array.isArray(e)||(t=[e]),0!==(t=t.filter((function(e){return!C.some((function(t){return e===t}))}))).length&&(t=[].concat(Object(u.a)(C),Object(u.a)(t)),I(t))}function be(){var e=(new Date).toLocaleTimeString().split(":"),t=Object(d.a)(e,2),a=t[0],n=t[1],r=ve(a)+ve(n)/60;return r<=11.5?"morning":r<=16?"midday":"evening"}function Se(e){var t=e.target,a=t.name,n=t.value,r=t.id;if("-"!==n[n.length-1]){var o=W.map((function(e){var t;if(r!=e.id)return e;if("name"===a){var o="".concat(P,"foodItem-").concat(n.toLowerCase(),"-carbohydratesPer100Grams"),c=localStorage.getItem(o);if(null!=c){var l,d=JSON.parse(c),m=Object(s.a)(Object(s.a)({},e.per100gSlide),{},(l={},Object(i.a)(l,a,n),Object(i.a)(l,"shouldDisplaySuggestions",!1),Object(i.a)(l,"carbohydratesPer100Grams",d),l));return Object(s.a)(Object(s.a)({},e),{},{per100gSlide:m})}}var g=""!==e.per100gSlide.name&&null!=e.per100gSlide.name&&"."!==e.per100gSlide.name[0];if("carbohydratesPer100Grams"===a&&g){var f="".concat(P,"foodItem-").concat(e.per100gSlide.name.toLowerCase(),"-carbohydratesPer100Grams"),h=fe(e.per100gSlide.name.toLowerCase());""!==n?(localStorage.setItem(f,JSON.stringify(n)),function(e){var t=e;Array.isArray(e)||(t=[e]),0!==(t=t.filter((function(e){return!b.some((function(t){return e===t}))}))).length&&(t=[].concat(Object(u.a)(b),Object(u.a)(t)),S(t))}(h)):(localStorage.removeItem(f),function(e){for(var t,a=0;a<b.length;a++)if(e===b[a]){t=a;break}if(null!=t){var n=Object(u.a)(b);n.splice(t,1),S(n)}}(h))}var p="name"===a,v=Object(s.a)(Object(s.a)({},e.per100gSlide),{},(t={},Object(i.a)(t,a,n),Object(i.a)(t,"shouldDisplaySuggestions",p),t));return Object(s.a)(Object(s.a)({},e),{},{per100gSlide:v})}));H(o)}}function pe(e){var t=e.target,a=t.name,n=t.value,r=t.id;if("-"!==n[n.length-1]){var o=W.map((function(e){var t;if(r!=e.id)return e;if("name"===a){var o="".concat(P,"foodItem-").concat(n.toLowerCase(),"-carbohydratesPerPiece"),c=localStorage.getItem(o);if(null!=c){var l,d=JSON.parse(c),m=Object(s.a)(Object(s.a)({},e.perPieceSlide),{},(l={},Object(i.a)(l,a,n),Object(i.a)(l,"shouldDisplaySuggestions",!1),Object(i.a)(l,"carbohydratesPerPiece",d),l));return Object(s.a)(Object(s.a)({},e),{},{perPieceSlide:m})}}var g=""!==e.perPieceSlide.name&&null!=e.perPieceSlide.name&&"."!==e.perPieceSlide.name[0];if("carbohydratesPerPiece"===a&&g){var f="".concat(P,"foodItem-").concat(e.perPieceSlide.name.toLowerCase(),"-carbohydratesPerPiece"),h=fe(e.perPieceSlide.name.toLowerCase());""!==n?(localStorage.setItem(f,JSON.stringify(n)),he(h)):(localStorage.removeItem(f),function(e){for(var t,a=0;a<C.length;a++)if(e===C[a]){t=a;break}if(null!=t){var n=Object(u.a)(C);n.splice(t,1),I(n)}}(h))}var b="name"===a,S=Object(s.a)(Object(s.a)({},e.perPieceSlide),{},(t={},Object(i.a)(t,a,n),Object(i.a)(t,"shouldDisplaySuggestions",b),t));return Object(s.a)(Object(s.a)({},e),{},{perPieceSlide:S})}));H(o)}}function ve(e){if("string"!==typeof e)return-1;var t=e.slice();t=t.replace(",",".");var a=parseFloat(t);return Number.isNaN(a)?-1:a}function Ee(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a="ein oder mehrere Werte sind nicht g\xfcltig";function n(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.every((function(e){return-1!==ve(e)}))}function r(e){if(e.isPer100gSlideActive){var r=e.per100gSlide.grams,o=e.per100gSlide.carbohydratesPer100Grams;return n(r,o)?ve(r)*(ve(o)/100)/10:(t&&alert(a),0)}var c=e.perPieceSlide.numberOfPieces,l=e.perPieceSlide.carbohydratesPerPiece;return n(c,l)?ve(c)*ve(l)/10:(t&&alert(a),0)}function o(e,r,o){return n(e,r,o)?(ve(e)-ve(r))/ve(o):(""!==e&&t&&alert(a),0)}var c=o(F,M,G);re(Math.round(10*c)/10);var i,u=0,s=0,d=Object(l.a)(W);try{for(d.s();!(i=d.n()).done;){var m=i.value,g=r(m);u+=g,m.isPer100gSlideActive?s+=m.per100gSlide.isIntermeal?g:0:s+=m.perPieceSlide.isIntermeal?g:0}}catch(h){d.e(h)}finally{d.f()}if(ee(Math.round(10*u)/10),ie(Math.round(10*s)/10),me(Math.round(10*(u-s))/10),!n(V))return t&&alert(a),-1;var f=u*ve(V);f+=c,f=Math.round(10*f)/10,X(f),e&&setTimeout((function(){ge.current.scrollIntoView({smooth:!0})}),5)}return Object(n.useEffect)((function(){localStorage.removeItem("".concat(P,"foodNameSuggestions")),function(){var e="".concat(P,"foodNameSuggestions"),t=localStorage.getItem(e);if(null==t)return;var a=JSON.parse(t);S(a)}(),he(function(){for(var e=Object.keys(localStorage),t=[],a=0,n=e;a<n.length;a++){var r=n[a].split("-");if(!(r.length<4)&&"".concat(P,"foodItem")==="".concat(r[0],"-").concat(r[1],"-").concat(r[2])&&"carbohydratesPerPiece"===r[4]){var o=fe(r[3]);t.push(o)}}return t}()),setInterval((function(){j?j=!1:window.location.reload()}),6e4)}),[]),r.a.createElement("div",null,j=!0,r.a.createElement("h1",null,"Insulin Rechner"),r.a.createElement("p",null,r.a.createElement("button",{className:"clear-data-button space-around",onClick:function(){H([]),X(0)}},"Daten l\xf6schen"),r.a.createElement("button",{className:"load-data-button",onClick:function(){if(null!=a){var e=a.foodItems;H(e),setTimeout((function(){Ee(!1,!1)}),100)}}},"Daten laden")),r.a.createElement("hr",{className:"destop-hr new-section-hr"}),r.a.createElement(g,{setBloodSugar:w,setTargetBloodSugar:A,setCorrectionFactor:T,setCarbohydrateFactor:z,bloodSugar:F,targetBloodSugar:M,correctionFactor:G,carbohydrateFactor:V}),r.a.createElement("hr",{className:"destop-hr new-section-hr"}),r.a.createElement(v,{foodItems:W,foodNameSuggestionsForPer100gSlide:b,foodNameSuggestionsForPerPieceSlide:C,addNewFoodItem:function(){var e=Math.random(),t=[].concat(Object(u.a)(W),[{key:Math.random(),id:e,isPer100gSlideActive:!0,per100gSlide:{name:"",grams:"",carbohydratesPer100Grams:"",isIntermeal:!1,shouldDisplaySuggestions:!0},perPieceSlide:{name:"",numberOfPieces:"",carbohydratesPerPiece:"",isIntermeal:!1,shouldDisplaySuggestions:!0}}]);H(t)},handleIsIntermealChange:function(e,t){var a=W.map((function(a){if(e==a.id){if(1===t){var n=Object(s.a)(Object(s.a)({},a.per100gSlide),{},{isIntermeal:!a.per100gSlide.isIntermeal});return Object(s.a)(Object(s.a)({},a),{},{per100gSlide:n})}var r=Object(s.a)(Object(s.a)({},a.perPieceSlide),{},{isIntermeal:!a.perPieceSlide.isIntermeal});return Object(s.a)(Object(s.a)({},a),{},{perPieceSlide:r})}return a}));H(a)},handlePer100gSlideValueChange:Se,handlePerPieceSlideValueChange:pe,deleteFoodItem:function(e){for(var t,a=0;a<W.length;a++)if(e==W[a].id){t=a;break}var n=Object(u.a)(W);n.splice(t,1),H(n)},handleSuggestionClick:function(e,t,a){var n={target:{name:"name",value:e,id:t}};a?Se(n):pe(n)},handleSlideChange:function(e,t){var a=W.map((function(a){return e==a.id?Object(s.a)(Object(s.a)({},a),{},{isPer100gSlideActive:t}):a}));H(a)}}),r.a.createElement("p",{style:{marginBottom:"20px"}},r.a.createElement("button",{className:"save-data-button space-around",onClick:function(){o({foodItems:W})}},"Daten speichen"),r.a.createElement("button",{className:"calculateIE-button",onClick:Ee},"Berechne IE")),r.a.createElement(E,{totalIE:Q,totalMainMealKE:de,totalIntermealKE:le,totalKE:_,totalCorrectionInsulin:ne,outputRef:ge}))}c.a.render(r.a.createElement(y,null),document.getElementById("root"))},8:function(e,t,a){}},[[19,1,2]]]);
//# sourceMappingURL=main.99d59be4.chunk.js.map