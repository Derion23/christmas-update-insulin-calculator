(this["webpackJsonpinsulin-calculator"]=this["webpackJsonpinsulin-calculator"]||[]).push([[0],{15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),l=a.n(o),c=a(10),i=a(2),u=a(3),s=a(6),m=a(1);a(4);function d(e){var t=e.id,a=e.name,n=void 0===a?"":a,o=e.value,l=void 0===o?"":o,c=e.onChange,i=void 0===c?"":c,u=e.description,s=void 0===u?"":u,m=e.placeholder,d=void 0===m?"":m,g=e.unit,f=void 0===g?"":g;return r.a.createElement("div",null,r.a.createElement("label",null,s),r.a.createElement("br",null),r.a.createElement("input",{type:"text",autoComplete:"off",id:t,name:n,placeholder:d,value:l,onChange:""===i?function(){return 0}:function(e){return i(e)}}),r.a.createElement("label",null,f))}function g(e){var t=e.setBloodSugar,a=e.setTargetBloodSugar,n=e.setCorrectionFactor,o=e.setCarbohydrateFactor,l=e.bloodSugar,c=e.targetBloodSugar,i=e.correctionFactor,u=e.carbohydrateFactor;return r.a.createElement("div",null,r.a.createElement(d,{name:"BloodSugar",value:l.toString(),description:"Blutzucker",unit:"mg/dl",onChange:function(e){return t(e.target.value)}}),r.a.createElement(d,{name:"TargetBloodSugar",value:c,description:"Blutzucker Zielwert",unit:"mg/dl",onChange:function(e){return a(e.target.value)}}),r.a.createElement(d,{name:"CorrectionFactor",value:i,description:"Korrektur-Faktor",unit:"mg/dl",onChange:function(e){return n(e.target.value)}}),r.a.createElement(d,{name:"CarbohydrateFactor",value:u,description:"KE-Faktor",onChange:function(e){return o(e.target.value)}}))}function f(e){var t=e.suggestionText,a=e.handleSuggestionClick;return r.a.createElement("li",{onClick:function(){return a(t)}},t)}function h(e){var t=e.allSuggestions,a=e.searchingText,n=e.handleSuggestionClick,o=""===a?[]:t.filter((function(e){return e.slice(0,a.length).toLowerCase()===a.toLowerCase()}));return r.a.createElement("div",null,0!==o.length&&r.a.createElement("ul",{className:"suggestion-list"},o.map((function(e){return r.a.createElement(f,{key:Math.random(),suggestionText:e,handleSuggestionClick:n})}))))}function b(e){var t=e.id,a=e.name,n=void 0===a?"":a,o=e.grams,l=void 0===o?"":o,c=e.carbohydratesPer100Grams,i=void 0===c?"":c,u=e.isIntermeal,s=void 0!==u&&u,m=e.foodNameSuggestions,g=e.handleIsIntermealChange,f=e.handleChange,b=e.deleteFoodItem,v=e.shouldDisplaySuggestions,E=void 0===v||v,S=e.handleSuggestionClick;return r.a.createElement("div",null,r.a.createElement("button",{className:"delete-food-item-button",onClick:function(){return b(t)}}),r.a.createElement("label",{className:"intermeal-checkbox"},r.a.createElement("input",{type:"checkbox",checked:s,onChange:function(){return g(t)}})," ZM?"),r.a.createElement(d,{id:t,name:"name",description:"Name",value:n,onChange:function(e){return f(e)}}),E&&r.a.createElement(h,{allSuggestions:m,searchingText:n,handleSuggestionClick:function(e){return S(e,t)}}),r.a.createElement(d,{id:t,name:"grams",description:"Gramm",value:l,onChange:function(e){return f(e)}}),r.a.createElement(d,{id:t,name:"carbohydratesPer100Grams",description:"Kohlenhydrate pro 100g",value:i,onChange:function(e){return f(e)}}),r.a.createElement("hr",null))}function v(e){var t=e.foodItems,a=void 0===t?[]:t,n=e.foodNameSuggestions,o=void 0===n?[]:n,l=e.addNewFoodItem,c=e.handleIsIntermealChange,i=e.handleChange,u=e.deleteFoodItem,s=e.handleSuggestionClick;return r.a.createElement("div",null,r.a.createElement("h3",null,"Elemente"),a.map((function(e){return r.a.createElement(b,{key:e.key,id:e.id,name:e.name,grams:e.grams,carbohydratesPer100Grams:e.carbohydratesPer100Grams,isIntermeal:e.isIntermeal,foodNameSuggestions:o,shouldDisplaySuggestions:e.shouldDisplaySuggestions,handleIsIntermealChange:c,handleChange:i,deleteFoodItem:u,handleSuggestionClick:s})})),r.a.createElement("p",null,r.a.createElement("button",{className:"add-new-food-item-button",onClick:function(){return l()}})))}function E(e){var t=e.totalIE,a=e.totalMainMealKE,n=e.totalIntermealKE,o=e.totalKE,l=e.totalCorrectionInsulin,c=e.outputRef;return r.a.createElement("div",{ref:c},""===t||void 0==t||t<=0?"":r.a.createElement("p",{className:"output"},"Hauptmahlzeit-KE : ",a," KE ",r.a.createElement("br",null),"Zwischenmahlzeit-KE : ",n," KE ",r.a.createElement("br",null),"Gesamt-KE: ",o," KE ",r.a.createElement("br",null),r.a.createElement("br",null),"Korrektur-Insulin: ",l," IE  ",r.a.createElement("br",null),"Gesamt-Insulin: ",t," IE"))}function S(e,t){var a="insulin-calculator-"+e,r=Object(n.useState)((function(){var e=localStorage.getItem(a);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),o=Object(m.a)(r,2),l=o[0],c=o[1];return Object(n.useEffect)((function(){null!=l&&localStorage.setItem(a,JSON.stringify(l))}),[a,l]),[l,c]}var p="insulin-calculator-";function I(e){e.hideLoadingScreen;var t=S("lastSavedData"),a=Object(m.a)(t,2),o=a[0],l=a[1],d=S("foodNameSuggestions",[]),f=Object(m.a)(d,2),h=f[0],b=f[1],I=Object(n.useState)(""),C=Object(m.a)(I,2),O=C[0],j=C[1],y=S("".concat(se(),"-targetBloodSugar")),k=Object(m.a)(y,2),N=k[0],F=k[1],w=S("".concat(se(),"-correctionFactor")),K=Object(m.a)(w,2),B=K[0],G=K[1],M=S("".concat(se(),"-carbohydrateFactor")),D=Object(m.a)(M,2),L=D[0],P=D[1],T=Object(n.useState)([]),x=Object(m.a)(T,2),J=x[0],z=x[1],R=Object(n.useState)(""),A=Object(m.a)(R,2),Z=A[0],H=A[1],U=Object(n.useState)(""),V=Object(m.a)(U,2),W=V[0],q=V[1],Q=Object(n.useState)(""),X=Object(m.a)(Q,2),Y=X[0],$=X[1],_=Object(n.useState)(""),ee=Object(m.a)(_,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(m.a)(ne,2),oe=re[0],le=re[1],ce=Object(n.useRef)();function ie(e){return"string"!==typeof e?"":"".concat(e[0].toUpperCase()).concat(e.slice(1))}function ue(e){var t=e;Array.isArray(e)||(t=[e]),0!==(t=t.filter((function(e){return!h.some((function(t){return e===t}))}))).length&&(t=[].concat(Object(s.a)(h),Object(s.a)(t)),b(t))}function se(){var e=(new Date).toLocaleTimeString().split(":"),t=Object(m.a)(e,2),a=t[0],n=t[1],r=de(a)+de(n)/60;return r<=11.5?"morning":r<=16?"midday":"evening"}function me(e){var t=e.target,a=t.name,n=t.value,r=t.id;if("-"!==n[n.length-1]){var o=J.map((function(e){if(r==e.id){var t;if("name"===a){var o="".concat(p,"foodItem-").concat(n.toLowerCase(),"-carbohydratesPer100Grams"),l=localStorage.getItem(o);if(null!=l){var c,m=JSON.parse(l);return ue(ie(n.toLowerCase())),Object(u.a)(Object(u.a)({},e),{},(c={},Object(i.a)(c,a,n),Object(i.a)(c,"shouldDisplaySuggestions",!1),Object(i.a)(c,"carbohydratesPer100Grams",m),c))}}if("carbohydratesPer100Grams"===a&&""!==e.name&&null!=e.name&&"."!==e.name[0]){var d="".concat(p,"foodItem-").concat(e.name.toLowerCase(),"-carbohydratesPer100Grams"),g=ie(e.name.toLowerCase());""!==n?(localStorage.setItem(d,JSON.stringify(n)),ue(g)):(localStorage.removeItem(d),function(e){for(var t,a=0;a<h.length;a++)if(e===h[a]){t=a;break}if(null!=t){var n=Object(s.a)(h);n.splice(t,1),b(n)}}(g))}var f="name"===a;return Object(u.a)(Object(u.a)({},e),{},(t={},Object(i.a)(t,a,n),Object(i.a)(t,"shouldDisplaySuggestions",f),t))}return e}));z(o)}}function de(e){var t=e.slice();t=t.replace(",",".");var a=parseFloat(t);return Number.isNaN(a)?-1:a}function ge(){var e="ein oder mehrere Werte sind nicht g\xfcltig";function t(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var n=0,r=t;n<r.length;n++){var o=r[n];if(-1===de(o))return!1}return!0}function a(a){return t(a.grams,a.carbohydratesPer100Grams)?de(a.grams)*(de(a.carbohydratesPer100Grams)/100)/10:(alert(e),0)}var n=function(a,n,r){return t(a,n,r)?(de(a)-de(n))/de(r):(""!==a&&alert(e),0)}(O,N,B);$(Math.round(10*n)/10);var r,o=0,l=0,i=Object(c.a)(J);try{for(i.s();!(r=i.n()).done;){var u=r.value;o+=a(u),l+=u.isIntermeal?a(u):0}}catch(m){i.e(m)}finally{i.f()}if(q(Math.round(10*o)/10),ae(Math.round(10*l)/10),le(Math.round(10*(o-l))/10),!t(L))return alert(e),-1;var s=o*de(L);s+=n,s=Math.round(10*s)/10,H(s),ce.current.scrollIntoView({smooth:!0})}return Object(n.useEffect)((function(){ue(function(){for(var e=Object.keys(localStorage),t=[],a=0,n=e;a<n.length;a++){var r=n[a].split("-");if(!(r.length<3)&&"".concat(p,"foodItem")==="".concat(r[0],"-").concat(r[1],"-").concat(r[2])){var o=ie(r[3]);t.push(o)}}return t}())}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Insulin Rechner"),r.a.createElement("p",null,r.a.createElement("button",{className:"load-data-button",onClick:function(){if(null!=o){var e=o.foodItems;z(e),ge()}}},"Daten laden")),r.a.createElement(g,{setBloodSugar:j,setTargetBloodSugar:F,setCorrectionFactor:G,setCarbohydrateFactor:P,bloodSugar:O,targetBloodSugar:N,correctionFactor:B,carbohydrateFactor:L}),r.a.createElement(v,{foodItems:J,foodNameSuggestions:h,addNewFoodItem:function(){var e=[].concat(Object(s.a)(J),[{key:Math.random(),id:Math.random(),isIntermeal:!1,shouldDisplaySuggestions:!0}]);z(e)},handleIsIntermealChange:function(e){var t=J.map((function(t){return e==t.id?Object(u.a)(Object(u.a)({},t),{},{isIntermeal:!t.isIntermeal}):t}));z(t)},handleChange:me,deleteFoodItem:function(e){for(var t,a=0;a<J.length;a++)if(e==J[a].id){t=a;break}var n=Object(s.a)(J);n.splice(t,1),z(n)},handleSuggestionClick:function(e,t){me({target:{name:"name",value:e,id:t}})}}),r.a.createElement("button",{className:"save-data-button",onClick:function(){l({foodItems:J})}},"Daten speichen"),r.a.createElement("button",{className:"calculateIE-button",onClick:ge},"Berechne IE"),r.a.createElement(E,{totalIE:Z,totalMainMealKE:oe,totalIntermealKE:te,totalKE:W,totalCorrectionInsulin:Y,outputRef:ce}))}l.a.render(r.a.createElement(I,{hideLoadingScreen:function(){document.getElementById("loadingScreen").classList.add("hide")}}),document.getElementById("root"))},4:function(e,t,a){}},[[15,1,2]]]);
//# sourceMappingURL=main.d897317d.chunk.js.map